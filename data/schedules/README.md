# EWU Schedule Snapshots (Banner / Ellucian)

This folder contains the on-disk schedule dataset used by the EWU Cyber Department Schedule project.

## Directory Structure

```
data/schedules/
├── raw/                       # Raw schedule-search JSON responses (as captured)
│   └── <TERM_CODE>/           # 6-digit Banner term code (YYYYTT)
│       └── <snapshot>.json    # One captured query response (kebab-case filename)
└── processed/                 # Generated, per-term schedules (deduplicated by CRN)
    └── <TERM_CODE>/
        └── schedule.json
```

## Raw Snapshot Naming

Raw snapshot filenames must be:

- `kebab-case.json` (no spaces, no underscores)
- descriptive of the query you ran (examples: `cscd.json`, `engl-musc.json`, `subjects-a.json`)
- **not** named `schedule.json` (reserved for generated outputs)

Multi-file captures are ok. Prefer adding a meaningful suffix like `-pt2` or a date marker like `-YYYYMMDD`.

## File Schemas

### 1) Raw snapshot files (`data/schedules/raw/<TERM_CODE>/*.json`)

Raw files are the direct JSON returned by the schedule search endpoint. They are a **superset** of:

```ts
export interface BannerDataResponse {
  success: boolean;
  totalCount: number;
  data: BannerCourse[]; // one record per section (CRN)
}
```

Raw files often include additional Banner metadata fields (pagination/config) such as `pageMaxSize`, `pageOffset`, `searchResultsConfigs`, `sectionsFetchedCount`, and sometimes a large `ztcEncodedImage` data URL.

### 2) Processed per-term schedules (`data/schedules/processed/<TERM_CODE>/schedule.json`)

Generated by `npm run build:schedules` (`scripts/build-term-schedules.ts`).

This output merges all raw snapshots for the term, deduplicates sections by CRN, and includes additional provenance fields:

```ts
export type TermScheduleFile = BannerDataResponse & {
  generatedAt: string | null; // ISO timestamp derived from source file mtimes
  sourceFiles: string[];      // raw snapshot filenames used as inputs
};
```

## How the App Uses This Data

- `npm run build:schedules` writes:
  - `data/schedules/processed/<TERM_CODE>/schedule.json`
  - `public/data/terms/<TERM_CODE>.json`
  - `public/data/terms/index.json`
  - `public/data/schedule.json` (copy of the default term)
- The browser UI loads schedules from `public/data/terms/*.json` (and trends from `public/data/trends/schedule-trends.json`).

